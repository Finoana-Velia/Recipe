package com.example.Finoana.Core;

import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.stereotype.Service;

import jakarta.mail.MessagingException;
import jakarta.mail.internet.InternetAddress;
import jakarta.mail.internet.MimeMessage;
import lombok.AllArgsConstructor;

@Service
@AllArgsConstructor
public class EmailSender {
	
	private JavaMailSender mailSender;
	
	public void sendEmail(String toMail,String subject,String body) {
		SimpleMailMessage message = new SimpleMailMessage();
		message.setFrom("sbakery775@gmail.com");
		message.setTo(toMail);
		message.setText(body);
		message.setSubject(subject);
		
		mailSender.send(message);
		System.out.println("Mail sended successfully");
	}
	
	public void sendHtmlEmail(String fromMail,String toMail, String subject) throws MessagingException{
		MimeMessage message = mailSender.createMimeMessage();
		message.setFrom(new InternetAddress(fromMail));
		message.setRecipients(MimeMessage.RecipientType.TO, toMail);
		message.setSubject("Test sending email from spring");
		
		String htmlContent = "<h1>This is a test Spring boot mail</h1>" + 
				"<p>it contain <strong>HTML</strong> code.</p>";
		message.setContent(htmlContent,"text/html; charset=utf-8");
		mailSender.send(message);
	}

}
